/**
* Vibe.
* (c) 2021 Bret Lowry
* @license MIT
* @description VibeJS a component library for composing apps
* @author Bret Lowry <bretgeek@gmail.com>
* @constructor
* @param {object} $self - optional, defaults to document.
* @return {object} obj with keys pointing to functions and types
*/
function Vibe(e=document,{fn:t={}}={}){let n=false;if(e.nodeName==="#document"){n=true}let r=false;if(n){(function e(){if(document.readyState!="loading"){r=true}else if(document.addEventListener){document.addEventListener("DOMContentLoaded",(function(){r=true}))}else{document.attachEvent("onreadystatechange",(function(){if(document.readyState!="loading"){r=true}}))}})()}function s(e,t=3e3){let n;let s;let i=1;n=setInterval(()=>{if(r){clearInterval(n);clearTimeout(s);if(e&&_(e)&&i<=1){try{e();i++}catch(e){console.error(e)}}else{return true}}},6);s=setTimeout(()=>{r=true},t)}function i(t,{html:r=true}={}){if(n){return this}o(e,t,{html:r});return this}function o(e,t,{html:n=true,concat:r=false}={}){if(e.templateText){if(n){if(r){const t=e.$html()+e.templateHTML;e.$html(t)}else{e.$html(e.templateHTML)}}else{if(r){const t=e.$text()+e.templatetext;e.$text(t)}else{e.$text(e.templateText)}}}const s=e.$text();const i=e.$html();e.templateText=s;e.templateHTML=i;const o=Object.keys(t);for(const r of o){let s=e.$text();if(n){s=e.$html()}s=s.replace(/\{\{\s*/g,"{{");s=s.replace(/\s*\}\}/g,"}}");if(t.hasOwnProperty(r)){const i=`{{${r}}}`;const o=new RegExp(i,"g");const f=s.replace(o,`${t[r]}`);if(n){e.$html(f)}else{e.$text(f)}}}return this}function f(e,t){const n={set:function e(n,r,s){n[r]=s;t[r]=s;n.$templateReplacer(n,t);n[r]=function(e=false,t=false){if(e){console.log(e);n.$vdata[r]=e;o(n,n.$vdata,{concat:t})}};return true}};e.set=new Proxy(e,n);e.$set=e.set}function l(e,{to:r="body",type:i="div",position:l="append",state:c={},props:u={},plugin:d={},events:p={},vdata:m={},className:v="vibe"}={}){let b=r;if(!te(b)){b=document.querySelector(r)}if(_(e)){const t=e();if(n){}const y=document.createElement(`${i}`);y.$=new Vibe(y);if(t.template&&t.template.length){y.innerHTML=t.template}if($(m)){m=h(y)}if(t.className&&t.className.length){y.classList.add(t.className)}y.classList.add(v);if(ee(d)){const e=Object.keys(d);for(const t of e){if(_(d[t])){d[t].bind(this,y);y[`$${t}`]=d[t]}}}if(t.fn){if(Object.keys(t.fn).length>0){y.$fn=t.fn}}y.$props=u;y.$self=y;const g=Object.keys(m);y.$vdata=m;o(y,m);for(const e of g){const t=e;y[t]=function(e=false,n=false){if(e){y.$vdata[t]=e;o(y,y.$vdata,{concat:n})}}}f(y,m);if(t.state){y.$state=t.state;y.$origState=t.state}else{y.$state=c;y.$origState=c}if(t.events){if(Object.keys(t.events).length>0){y.$event=t.events;for(const e in y.$event){y.addEventListener(e,y.$event[e],true)}}}if(Object.keys(p).length>0){y.$event=p;for(const e in y.$event){y.addEventListener(e,y.$event[e],true)}}y.id="v"+re();if(te(b)){s(a(y,b,l));y.$mountedTo=r}else{let e=0;const t=setInterval((function(){e++;if(te(b)){s(a(y,b,l));y.$mountedTo=r;clearInterval(t)}if(e>60){clearInterval(t);throw new Error(`Whoops! could not mount to ${r} element.`)}}),100)}if(_(t.init)){y.init=t.init;s(y.init(y))}return y}else{if(e.nodeType===1){if(!e.$){e.$=new Vibe(e)}if(ee(d)){const t=Object.keys(d);for(const n of t){if(_(d[n])){d[n].bind(this,e);e[`$${n}`]=d[n]}}}const t=Object.keys(m);e.$vdata=m;o(e,m);for(const n of t){const t=n;e[t]=function(n=false,r=false){if(n){e.$vdata[t]=n;o(e,e.$vdata,{concat:r})}}}f(e,m);e.classList.add(v);e.$props=u;e.$self=e;e.$state=c;e.$origState=c;if(Object.keys(p).length>0){e.$event=p;for(const t in e.$event){e.addEventListener(t,e.$event[t],true)}}if(!e.id){e.id="v"+re()}return e}else if(K(e)){let n=null;if(w(e)){let t;t=w(e,true);n=document.createElement(`${t[0]}`);n.innerHTML=t[1]}else{n=document.createElement(`${i}`);n.innerHTML=e}n.$=new Vibe(n);if(Object.keys(t).length>0){n.$fn=t}n.$props=u;n.$self=n;n.$obj=n.$;n.classList.add(v);n.$state=c;n.$origState=c;if(ee(d)){const e=Object.keys(d);for(const t of e){if(_(d[t])){d[t].bind(this,n);n[`$${t}`]=d[t]}}}const r=Object.keys(m);n.$vdata=m;o(n,m);for(const e of r){const t=e;n[t]=function(e=false,r=false){if(e){n.$vdata[t]=e;o(n,n.$vdata,{concat:r})}}}f(n,m);if(Object.keys(p).length>0){n.$events=p;for(const e in n.$events){n.addEventListener(e,n.$events[e],true)}}n.id="v"+re();s(a(n,b,l));return n}}}function a(e,t,n){switch(n){case"after":e.$insertAfter(t);break;case"before":e.$insertBefore(t);break;case"prepend":e.$prependTo(t);break;default:e.$appendTo(t);break}return this}function c(t="mousedown",n,r=false){let s=r;if(typeof r==="boolean"){if(r){s={capture:true}}else{s={capture:false}}}const i=t.split(",");for(let t of i){t=t.trim();e.addEventListener(t,n,s)}return this}function u(t="mousedown",n,r=false){const s=e;let i=r;if(typeof r==="boolean"){if(r){i={capture:true}}else{i={capture:false}}}const o=t.split(",");for(const e of o){s.removeEventListener(e,n,i)}return this}function d(t){const n=e;const r=new Event(t);n.dispatchEvent(r,{bubbles:true,cancelable:true});return this}function h(e){const t=e.$text();const n=/{{(.*?)}}/g;const r=t.matchAll(n);const s=Array.from(r);const i=[];for(const e of s){if(!/^\d/.test(e[1])&&e[1].length){i.push(e[1].trim())}}const o={};if(i.length){for(const e of i){o[e]=""}}return o}function p(t,{all:n=false,vibe:r=true,fn:s=false,plugin:i={},inject:f=false,vdata:l={}}={}){if(!n){let n=false;if(t.startsWith("#")){t=t.replace(/#/,"");n=document.getElementById(t)}else{n=e.querySelectorAll(t)[0]}if(n){if(r){if(K(f)&&ee(l)&&!$(l)){const e=n.innerHTML;n.innerHTML=`${e}${f}`}n.$=Vibe().render(n);if($(l)){l=h(n)}if(ee(l)&&!$(l)){const e=Object.keys(l);n.$vdata=l;o(n,l);for(const t of e){const e=t;n[e]=function(t=false,r=false){if(t){n.$vdata[e]=t;o(n,n.$vdata,{concat:r})}}}}}if(ee(i)){const e=Object.keys(i);for(const t of e){if(_(i[t])){i[t].bind(this,n);n[`$${t}`]=i[t]}}}if(_(s)){s(n)}return n}else{return false}}else{const n=e.querySelectorAll(t);if(n.length){if(r){n.forEach(e=>{if(K(f)&&ee(l)&&!$(l)){const t=e.innerHTML;e.innerHTML=`${t}${f}`}e.$=Vibe().render(e);if($(l)){l=h(e)}if(ee(l)&&!$(l)){const t=Object.keys(l);e.$vdata=l;o(e,l);for(const n of t){const t=n;e[t]=function(n=false){if(n){e.$vdata[t]=n;o(e,e.$vdata)}}}}})}if(ee(i)){const e=Object.keys(i);for(const t of e){if(_(i[t])){i[t].bind(this,single);n.forEach(e=>{i.bind(this,e);e[i.name]=i})}}}if(_(s)){n.forEach(e=>{s(e)})}return n}else{return false}}}function $(e){return Object.keys(e).length===0}function m(e){e=e.toString();e=e.replace(/px/g,"");e=e.replace(/%/g,"");e=e.replace(/em/g,"");e=Math.round(Number(e));return e}function v(e){const t=window.getComputedStyle(e,null);const n=t.getPropertyValue("-webkit-transform")||t.getPropertyValue("-moz-transform")||t.getPropertyValue("-ms-transform")||t.getPropertyValue("-o-transform")||t.getPropertyValue("transform")||"none";if(n!="none"){const e=n.split("(")[1].split(")")[0].split(",");const t=Math.round(Math.atan2(e[1],e[0])*(180/Math.PI));return t<0?t+360:t}return 0}function b(t,r=true){if(n){return this}if(t=="rotate"){return v(e)}if(t==="position"){return e.style.position}if(t==="offsetLeft"){return e.offsetLeft}if(t==="offsetTop"){return e.offsetTop}if(t==="offsetHeight"){return e.offsetHeight}if(t==="offsetWidth"){return e.offsetHeight}let s=getComputedStyle(e).getPropertyValue(t)||null;if(r){try{s=m(s)}catch(e){console.error(e)}}return s}function y(t="2d",r=false){if(n){return this}if(e.tagName==="CANVAS"||e.nodeName==="CANVAS"||e instanceof HTMLCanvasElement){if(r){return e.getContext(t,r)}else{return e.getContext(t)}}else{throw new Error("$self must be an instance of canvas.")}}function g(t=false,n=false){const r=["x","y","width","height","right","left","top","bottom"];if(!r.includes(t)){return null}const s=e.getBoundingClientRect()[t];if(n){return Math.round(s)}else{return s}}function x(e){const t=document.createElement(e[0]);t.innerHTML=e[1];return t}function w(e,t=false){const n=(new DOMParser).parseFromString(e,"text/html");if(t){return[n.body.childNodes[0].tagName.toLowerCase(),n.body.childNodes[0].innerHTML]}else{return Array.from(n.body.childNodes).some(e=>e.nodeType===1)}}function T(e=false,t,n){for(const r of e){if(!n){return r[`${t}`]}else{r[`${t}`]=n}}}function L(t=false){if(n){T(e.stk,"textContent",t);return this}if(!t){return e.textContent}else{e.textContent=t}return this}function k(t=false){if(n){T(e.stk,"innerHTML",t);return this}if(!t){return e.innerHTML}else{e.innerHTML=t}return this}function E(e){S(e);return this}function O(e){S(e,true);return this}function j(e){S(e,true,true);return this}function M(e){S(e,false,true);return this}function S(t,r=false,s=false){if(n){return this}const i=e;if(K(t)){let e;if(w(t)){e=x(w(t,true),true);if(!e){return this}}else{e=document.querySelectorAll(t)[0];if(!e){return this}}if(r){if(s){e.before(i)}else{i.before(e)}}else{if(s){e.after(i)}else{i.after(e)}}}if(te(t)){if(r){if(s){t.before(i)}else{i.before(t)}}else{if(s){t.after(i)}else{i.after(t)}}}return this}function q(t,r=false){if(n){return this}const s=e;if(!t){return this}if(K(t)){let e;if(w(t)){e=x(w(t,true),true)}else{e=t}if(r){s.prepend(e)}else{s.append(e)}}else{if(r){s.prepend(t)}else{s.append(t)}}return this}function A(e){if(n){return this}if(!e){return this}q(e,true);return this}function V(e){if(!e){return this}H(e,true);return this}function C(e){if(!e){return this}H(e);return this}function H(t,r=false){if(n){e=e.body}const s=e;if(K(t)){const e=document.querySelectorAll(t)[0];if(!e){return this}if(r){e.prepend(s)}else{e.append(s)}}if(te(t)){if(r){t.prepend(s)}else{t.append(s)}return this}}function N(t=false,r=false){if(n){return this}let s;let i;if(r){i=`-${e.$cs("left",true)+t}`}else{s=`${e.$cs("left",true)+t}`}if(s){return s}else{return i}if(!s||!i){return e.$cs("left",true)}}function I(t,{add:r=true}={}){function s(e){for(const n of e){if(!r){n.style.cssText=t}else{n.style.cssText=n.style.cssText+t}}}if(n){s(e.stk);return this}if(!t){return this}if(e.$stk.length){s(e.$stk)}else{if(!r){e.style.cssText=t}else{e.style.cssText=e.style.cssText+t}}return this}function P(t="div",{override:r=false,position:s=false,inject:i=false,vdata:o=false,to:f=false}={}){const l=["html","head","link","meta","script","style","title","body","article","aside","footer","header","h1","h2","h3","h4","h5","h6","main","nav","section","blockquote","div","figure","hr","li","ol","p","pre","ul","a","code","data","time","em","i","span","strong","audio","source","img","track","video","iframe","svg","canvas","noscript","col","colgroup","button","option","fieldset","label","form","input","select","textarea","menu","template"];if(!l.includes(t)){if(!r){t="div"}}const a=document.createElement(t);const c=a;c.$=Vibe().render(a,{vdata:o});if(i){c.$html(i)}if(!f){f=e}if(n&&!f){return c}if(!te(f)){f=document.querySelector("body")}if(n){if(!f){f=document.body}if(s){if(s!=="prepend"){if(s!=="append"){s="append"}}}}if(s&&f){switch(s){case"after":c.$insertAfter(f);break;case"before":c.$insertBefore(f);break;case"prepend":c.$prependTo(f);break;default:c.$appendTo(f);break}return c}else{return c}}function D(t=false){if(n){return this}let r=false;let s="";if(t){s=e.id;r=e.cloneNode(true)}e.remove();if(t){r.$=new Vibe(r);r.id=s;return r}else{return this}}function B({to:t=false,position:r="append"}={}){if(n){return this}const i=e.cloneNode(true);i.$=new Vibe(i);i.id="v"+re();if(t){if(!te(t)){t=document.querySelector(t)}s(a(i,t,r))}return i}function F(t,r=false){if(n){return this}const s=e;if(!r){s.classList.add(t)}else{s.classList.remove(t)}return this}function R(e){if(n){return this}F(e,true);return this}function X(e){if(n){return this}z(e,false,true);return this}function Y(t=false){if(n){return this}if(t){const n=t.split(",");for(let t of n){t=t.trim();t=t.replace(/\./g,"");if(e.classList.contains(t)){e.$removeClass(t)}else{e.$addClass(t)}}}return this}function z(t,r=false,s=false){if(n){return this}const i=e;if(t&&K(t)){if(s){i.removeAttribute(t);return this}if(K(r)||typeof r==="number"){i.setAttribute(t,r);return this}if(!r){const e=i.getAttribute(t);return e}}}function W(){if(n){return this}return e.dataset}function U(t,r="get"){const s=e;if(n){return this}if(r==="remove"){s.removeAttribute("data-"+t)}if(r==="set"){s.setAttribute("data-"+t,t)}if(r==="get"){return s.getAttribute("data-"+t)}}function G(t=false,{fn:r=false,vibe:s=true}={}){let i=[];let o;let f=e;if(n){return this}if(K(t)){o=t.split(",");while(f=f.parentElement){o.forEach(e=>{e=e.trim();if(f.matches(e)&&!i.includes(f)){i.push(f);console.log(f.classList)}})}}if(!t){while(f=f.parentElement){i.push(f)}}if(i.length){i=i.filter((e,t,n)=>n.indexOf(e)==t);if(s){for(const e of i){e.$=new Vibe(e)}}if(_(r)){for(const e of i){r(e)}}}return i}function J(t=false,{fn:n=false,vibe:r=true}={}){const s=[];let i;const o=e;const f=e.getElementsByTagName("*");if(K(t)){i=t.split(",");for(const e of f){i.forEach(t=>{t=t.trim();if(e.matches(t)){s.push(e)}})}}if(!t){for(const e of f){s.push(e)}}if(s.length){if(r){for(const e of s){e.$=new Vibe(e)}}if(_(n)){for(const e of s){n(e)}}}console.log(s);return s}function K(e){return typeof e==="string"}function Q(e){return/^-{0,1}\d+$/.test(e)}function Z(e){const t=/^-?[0-9]+$/;return t.test(e)}function _(e){return typeof e==="function"}function ee(e){if(Object.prototype.toString.call(e).slice(8,-1)==="Object"){return true}else{return false}}function te(e){return e.nodeType==1}function ne(e){if(Array.isArray(e)){return true}else{return false}}function re(){if(ee(crypto)){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16))}else{let e=(new Date).getTime();let t=performance&&performance.now&&performance.now()*1e3||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,n=>{let r=Math.random()*16;if(e>0){r=(e+r)%16|0;e=Math.floor(e/16)}else{r=(t+r)%16|0;t=Math.floor(t/16)}return(n=="x"?r:r&7|8).toString(16)})}}function se(e,t=false){e=e.replace(/[^\x20-\x7E]+/g,"");if(t){e=e.replace(/[^a-z0-9-#]+|\s+/gim,"")}e=e.trim();return e}function ie(){if(n){return this}return e.id}function oe(t){if(_(t)){t(e)}return this}function fe(t={}){if(n){return this}e.$state=t}function le(t){if(n){return this}return e.$state[t]}function ae(t,n="name",{delay:r=10,child:s=true,attr:i=true,subtree:o=false,attrs:f=["none"],chardat:l=false,attrsOV:a=false,chardatOV:c=false}){if(typeof t!=="function"){return}const u={childList:s,attributes:i,characterData:l,subtree:o,attributeFilter:f,attributeOldValue:a,characterDataOldValue:c};const d=e;const h=new MutationObserver((function(e){e.forEach((function(e){if(e.type==="attributes"){if(f[0]!=="none"){setTimeout(()=>{t(d)},r)}}else{if(f[0]==="none"){if(e.type==="childList"||e.type==="subtree"||e.type==="characterData"){setTimeout(()=>{t(d)},r)}}}}))}));if(e.$observers[n]){e.$observers[n].disconnect();delete e.$observers[n]}e.$observers[n]=h;e.$observers[n].observe(e,u);const p=Object.keys(e.$observers);return this}function ce(t="name"){if(t==="all"){const t=Object.keys(e.$observers);for(const n of t){delete e.$observers[n];n.disconnect()}}else{if(e.$observers[t]){e.$observers[t].disconnect();delete e.$observers[t]}}return this}function ue(){const t=Object.keys(e.$observers);return t}async function de({url:e=false,type:t="json",fn:n=false,e:r={}}={}){const s=await fetch(e);let i;if(t=="json"){i=await s.json()}if(t=="text"){i=await s.text()}if(_(n)){n(i,r)}}function he({url:t=false,type:n="text",body:r=false,contentType:s="application/x-www-form-urlencoded",fn:i=false}={}){e.isPost=false;if(!t||!r){return false}fetch(t,{headers:new Headers({"Content-Type":`${s}`}),method:"post",body:r}).then((function(e){if(e.ok){if(n==="json"){return e.json()}else{return e.text()}}return Promise.reject(e)})).then((function(t){e.isPost=true;if(_(i)){i(t)}})).catch((function(e){console.warn("Something went wrong.",e)}))}function pe(){return window.matchMedia("(pointer: coarse)").matches||false}function $e(){setTimeout((function(){e.onfocus=blur()}),100);return this}window.requestInterval=function(e,t){const n=Date.now;const r=window.requestAnimationFrame;let s=n();let i;var o=function(){n()-s<t||(s+=t,e());i||r(o)};r(o);return{clear:function(){i=1},start:function(){n()}}};function me({display:t="block",speed:n=300}={}){const r=e.$cs("display");e.$css(`display: ${r}; visibility: visible; opacity: 0.0;`,{add:true});e.$css(`display: ${t}; visibility: visible;`,{add:true});let s=0;const i=requestInterval((function(){s++;if(s<=9){e.$css(`opacity: 0.${s} `,{add:true})}else{s=1;e.$css(`opacity: ${s} `,{add:true});i.clear()}}),n);return this}function ve({display:t="block",speed:n=300}={}){const r=e.$cs("display");e.$css(`display: ${r}; visibility: visible; opacity: 1;`,{add:true});e.$css(`display: ${t}; visibility: visible;`,{add:true});let s=1;const i=requestInterval((function(){if(s>.1){s-=.1;s=s.toFixed(2);e.$css(`opacity: ${s} `,{add:true})}else{s=0;e.$css(`opacity: ${s} `,{add:true});e.$isrun=false;e.$runq();i.clear()}}),n);return this}function be(){e.$fadeIn({speed:1});return this}function ye(){e.$fadeOut({speed:1});return this}function ge({time:t=1e3,iterate:n=1,step:r=1,duration:s=false,fn:i=false,fps:o=false,force:f=false},l={}){if(Q(o)){l["fps"]=o;o=Math.round(1e3/o)}l["iterate"]=n;let a=0;let c=n;if(f){e.$isrun=false}for(let s=0;s<n;s++){const s=function(e){const s=new Date;const f=s.getTime()+t;if(o){const t=requestInterval((function(){if(_(i)){a+=r;a=+a.toFixed(2);c=c-1;l["step"]=a;l["iteration"]=n-c;l["iterationsLeft"]=n-(n-c);l["frame"]=n-c;l["el"]=e;l["kill"]=function(){e.$q.splice(0,n-(n-c));e.$isrun=false};i(l)}e.$isrun=false;e.$runq();e.$isrun=false;t.clear()}),o)}else{const s=requestInterval((function(){const t=new Date;if(t.getTime()>=f){if(_(i)){a+=r;a=+a.toFixed(2);c=c-1;l["step"]=a;l["iteration"]=n-c;l["iterationsLeft"]=n-(n-c);l["el"]=e;l["kill"]=function(){e.$q.splice(0,n-(n-c));e.$isrun=false};i(l)}e.$isrun=false;e.$runq();e.$isrun=false;s.clear()}}),t)}};e.$q.push(s)}if(e.$q.length){e.$runq()}return this}function xe(t,n=1){if(_(t)){e.$delay({time:n,fn:t})}return this}function we(){let t;if(!e.$isrun){e.$isrun=true;t=e.$q.shift();if(_(t)){t(e);we()}}return null}function Te(e,t){return document.elementFromPoint(e,t)}function Le(e=0){let t=window.location.pathname;const n=t;t=t.split("/");const r=t[e];if(r.length&&e>0){return r}else{return n}}function ke({el:t=false,el2:r=false}){if(n&&!r){return this}if(!r){r=e}const s=t.getBoundingClientRect();const i=r.getBoundingClientRect();return!(s.top+s.height<i.top||s.top>i.top+i.height||s.left+s.width<i.left||s.left>i.left+i.width)}function Ee({draghandle:t=false,contain:n="body",dropfn:r=false,drop:s=false,over:i=false,overfn:o=false,zIndex:f=1}={}){const l=e;let a=false;let c;let u;let d;let h;let p=0;let $=0;const m=document.querySelectorAll(n)[0];const v=l.parentNode||l.parentElement;const b=l;let y;if(s&&K(s)){y=document.querySelector(s)}let g;if(i&&K(i)){g=document.querySelector(i)}v.addEventListener("touchstart",w,false);v.addEventListener("touchend",T,false);v.addEventListener("touchmove",L,false);v.addEventListener("mousedown",w,false);v.addEventListener("mouseup",T,false);m.addEventListener("mouseleave",T,false);v.addEventListener("mousemove",L,false);let x=false;function w(e){const n=l.$cs("position");if(n!=="absolute"){l.$css("position: absolute;")}if(e.type==="touchstart"){d=e.touches[0].clientX-p;h=e.touches[0].clientY-$}else{if(!x){x=true;d=e.clientX-p;h=e.clientY-$}else{d=e.clientX-p;h=e.clientY-$}}if(e.target.matches(t)||!t){e.target.style.cssText="user-select: none; cursor: pointer;";a=true}k(c,u,b)}function T(t){d=c;h=u;if(y&&l.$isTouching({el:y})&&a){r({dragee:e,dropee:y});a=false}a=false;k(c,u,b)}function L(t){if(a){t.preventDefault();if(t.type==="touchmove"){c=t.touches[0].clientX-d;u=t.touches[0].clientY-h}else{c=t.clientX-d;u=t.clientY-h}if(g&&l.$isTouching({el:g})&&_(o)&&a){o({dragee:e,dropee:g})}p=c;$=u;k(c,u,b)}}function k(e,t,n){n.style.transform="translate3d("+e+"px, "+t+"px, 0)"}return this}function Oe({node:t=e,drop:n=false,dropfn:r=false,upfn:s=false,downfn:i=false,leftfn:o=false,rightfn:f=false}={}){const l=t;l.addEventListener("touchstart",u,false);l.addEventListener("touchmove",d,false);let a=null;let c=null;function u(e){a=e.touches[0].clientX;c=e.touches[0].clientY}function d(e){if(a===null){return}if(c===null){return}const n=e.touches[0].clientX;const r=e.touches[0].clientY;const l=a-n;const u=c-r;if(Math.abs(l)>Math.abs(u)){if(l>0){if(_(o)){o(t)}}else{if(_(f)){f(t)}}}else{if(u>0){if(_(s)){s(t)}}else{if(_(i)){i(t)}}}a=null;c=null;e.preventDefault()}return this}function je(e){if(_(e)){window.addEventListener("load",e,true)}return this}function Me(e){if(_(e)){window.addEventListener("scroll",e,true)}return this}function Se(e,t,n=false){if(n){window.removeEventListener(e,t,true)}else{window.addEventListener(e,t,true)}return this}function qe(...e){return t=>e.reduce((e,t)=>t(e),t)}function Ae({end:t=false,fn:n=(()=>{})}={}){if(_(n)){e.$stream.push(n)}if(t){const t=qe(...e.$stream);return t()}else{return this}}function Ve(t=false,{vibe:r=true,fn:s=false,first:i=false}={}){let o;if(!t){return}else{if(n){o=$vibe.select(`${t}`,{all:true})}else{o=e.$select(`${t}`,{all:true})}}if(o.length){for(const e of o){if(r){e.$=Vibe().render(e)}}}if(_(s)&&o.length){for(const e of o){s(e)}}if(i){return o[0]}else{return o}}function Ce(t=false,{vibe:r=true,fn:s=false}={}){let i;if(!t){return}else{if(n){i=$vibe.select(`${t}`,{all:true});e.stk=i}else{i=e.$select(`${t}`,{all:true});e.$stk=i}}if(_(s)&&i.length){for(const e of i){if(r){e.$=Vibe().render(e)}s(e)}}return this}const He={fn:t,id:ie,uuid:re,animate:ge,clone:B,ready:s,get:de,post:he,css:I,left:N,isTouch:pe,rpx:m,addClass:F,removeClass:R,children:J,parents:G,before:O,insertBefore:j,insertAfter:M,after:E,append:q,prepend:A,select:p,attr:z,removeAttr:X,appendTo:C,prependTo:V,createNode:P,filterString:se,dataset:W,data:U,detach:D,render:l,run:oe,plugin:{},doc:document,rect:g,mountedTo:false,cs:b,ctx:y,on:c,observe:ae,observers:{},unobserve:ce,getobservers:ue,off:u,trigger:d,html:k,text:L,pager:Le,getState:le,setState:fe,isFunction:_,isObject:ee,isElement:te,isArray:ne,isString:K,isNumber:Q,isInt:Z,getAtPt:Te,isTouching:ke,drag:Ee,swipe:Oe,load:je,scroll:Me,show:be,hide:ye,delay:ge,queue:xe,fadeIn:me,fadeOut:ve,templateReplacer:o,templater:i,q:[],runq:we,isrun:false,w:Se,pipe:Ae,stream:[],each:Ce,find:Ve,toggle:Y,stk:[]};for(const t in He){const n="$"+t;e[n]=He[t]}return He}var $vibe=new Vibe(document);
